ScrollScreen subroutine
	inc scroll_pos
        lda scroll_pos
        sta PPU_SCROLL
        lda scroll_pos + 1
        sta PPU_SCROLL
        and #1	
	ora #CTRL_NMI
        sta PPU_CTRL
        rts
        


SetPalette subroutine
	PPU_SETADDR $3f00
        ldy #0
.loop:
	lda Palette,y	; lookup byte in constant data -> palette
	sta PPU_DATA
        iny		
        cpy #32		
	bne .loop	; repeat until Y is 32	
        rts			



FillVRAM subroutine
	PPU_SETADDR $2000
        ldx #00
.loopA:
	lda Level1A,x
	sta PPU_DATA	
        inx		
	bne .loopA
.loopB:
	lda Level1B,x
	sta PPU_DATA	
        inx		
	bne .loopB
.loopC:
	lda Level1C,x
	sta PPU_DATA	
        inx		
	bne .loopC
.loopD:
	lda Level1D,x
	sta PPU_DATA	
        inx
	bne .loopD
        
.loopE:
	lda Level2A,x
	sta PPU_DATA	
        inx		
	bne .loopE
.loopF:
	lda Level2B,x
	sta PPU_DATA	
        inx		
	bne .loopF
.loopG:
	lda Level2C,x
	sta PPU_DATA	
        inx		
	bne .loopG
.loopH:
	lda Level2D,x
	sta PPU_DATA	
        inx
        
	bne .loopH
        rts			
        
        
        

	;align $100
Palette:
	hex 1c		;background
	hex 02122200	;background 0
        hex 02122200	;background 1
        hex 02112200	;background 2
        hex 02122200	;background 3
        hex 19293900	;sprite 0
        hex 19293900	;sprite 1
        hex 19293900	;sprite 2
        hex 1c2c3c	;sprite 3


   	
Level1A:
	hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
Level1B:
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
Level1C:
        hex 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
Level1D:
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97
        
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97
        
Level2A:
	hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 0C 0C 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 0C 0C 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
 
        hex 97 97 00 00 0C 0C 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 0C 0C 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 0C 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 0C 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
Level2B:
        hex 97 97 00 00 00 00 00 00 0C 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 0C 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
Level2C:
        hex 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
Level2D:
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97
        
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97 
        hex 97 97 00 00 00 00 00 00 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 97 97
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  
        hex 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97  97 97 97 97 97 97 97 97 97 97 97 97 97 97 97 97